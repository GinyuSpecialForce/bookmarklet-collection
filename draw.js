javascript:(function(){var a=Math.min;function b(a,d){if(2>=a.length)return a;for(var e,f=0,g=0,h=1;h<a.length-1;h++)e=c(a[h],a[0],a[a.length-1]),e>f&&(f=e,g=h);if(f>d){var j=b(a.slice(0,g+1),d),k=b(a.slice(g),d);return j.slice(0,-1).concat(k)}return[a[0],a[a.length-1]]}function c(b,c,d){var e=Math.sqrt,f=e((d.x-c.x)**2+(d.y-c.y)**2);if(0===f)return e((b.x-c.x)**2+(b.y-c.y)**2);var g=((b.x-c.x)*(d.x-c.x)+(b.y-c.y)*(d.y-c.y))/f**2;g=Math.max(0,a(1,g));var h=c.x+g*(d.x-c.x),i=c.y+g*(d.y-c.y);return e((b.x-h)**2+(b.y-i)**2)}function d(a,b,c,d,e){return(a-b)/(c-b)*(e-d)+d}function f(c){for(var e=b(c,1),f=0;f<e.length-1;f++){var g=0<f?e[f-1]:e[f],h=e[f],j=e[f+1],k=f%3Ce.length-2?e[f+2]:j,l=h.x+(j.x-g.x)/6,o=h.y+(j.y-g.y)/6,p=j.x-(k.x-h.x)/6,q=j.y-(k.y-h.y)/6;if(m.beginPath(),m.moveTo(h.x,h.y),C){var%20r=(a(g.pressure,h.pressure,j.pressure,k.pressure)+y([g.pressure,h.pressure,j.pressure,k.pressure]))/2*n;m.lineWidth=d(r,0,1,.5*n,3*n*w)}else{var%20r=n*w;m.lineWidth=r}m.bezierCurveTo(l,o,p,q,j.x,j.y),m.stroke()}}function%20g(a){if(q){a.preventDefault();var%20b,c,d;a.changedTouches?(b=a.changedTouches[0].pageX-j.offsetLeft,c=a.changedTouches[0].pageY-j.offsetTop-window.pageYOffset,d=a.changedTouches[0].force||.5):(b=a.pageX-j.offsetLeft,c=a.pageY-j.offsetTop-window.pageYOffset,d=%22pen%22===a.pointerType&&a.pressure?a.pressure:.5),v.push({x:b,y:c,pressure:d}),m.putImageData(r[r.length-1],0,0),f(v)}}function%20h(a){q=!0,o=a.pageX-j.offsetLeft,p=a.pageY-j.offsetTop-window.pageYOffset,r.push(m.getImageData(0,0,j.width,j.height)),r=r.slice(-20)}function%20i(a){q=!0,o=a.changedTouches[0].pageX-j.offsetLeft,p=a.changedTouches[0].pageY-j.offsetTop-window.pageYOffset,r.push(m.getImageData(0,0,j.width,j.height)),r=r.slice(-20)}var%20j=document.getElementById(%22draw-on-page-canvas%22);if(j){j.parentNode.removeChild(j);var%20k=document.getElementById(%22controls-div%22);return%20void%20k.parentNode.removeChild(k)}j=document.createElement(%22canvas%22),j.id=%22draw-on-page-canvas%22,j.style.position=%22fixed%22,j.style.top=%220%22,j.style.left=%220%22,j.style.border=%222px%20solid%20rgba(255,%20255,%200,%200.3)%22;var%20l=window.devicePixelRatio||2;j.width=(window.innerWidth-20)*l,j.height=window.innerHeight*l,j.style.width=window.innerWidth-20+%22px%22,j.style.height=window.innerHeight+%22px%22,j.style.zIndex=%229998%22;var%20m=j.getContext(%222d%22);m.scale(l,l),m.strokeStyle=%22#02498c%22;var%20n=1.5;m.lineWidth=n,m.lineCap=%22round%22,m.lineJoin=%22round%22,document.body.appendChild(j);var%20o,p,q=!1,r=[];if(localStorage.getItem(%22canvasDrawing%22)&&!1){var%20s=localStorage.getItem(%22canvasDrawing%22),t=new%20Image;t.src=s,m.drawImage(t,0,0)}var%20u=document.createElement(%22div%22);u.id=%22controls-div%22,u.style.zIndex=%229999%22,u.style.fontSize=%2212px%22,document.body.appendChild(u);var%20v=[],w=1,x=%22%22;const%20y=a=%3Ea.reduce((c,a)=%3Ec+a)/a.length;j.addEventListener(%22mousedown%22,h),j.addEventListener(%22touchstart%22,i),j.addEventListener(%22mousemove%22,g),j.addEventListener(%22touchmove%22,function(a){E&&%22touch%22==x?j.style.pointerEvents=%22none%22:g(a)}),j.addEventListener(%22pointerdown%22,function(a){E&&%22touch%22==a.pointerType&&(j.style.pointerEvents=%22none%22)}),j.addEventListener(%22mouseup%22,function(){q=!1,v=[];var%20a=j.toDataURL();localStorage.setItem(%22canvasDrawing%22,a)}),j.addEventListener(%22touchend%22,function(){q=!1,v=[];var%20a=j.toDataURL();localStorage.setItem(%22canvasDrawing%22,a),setTimeout(()=%3E{j.style.pointerEvents=%22auto%22},%221000%22),setTimeout(()=%3E{j.style.pointerEvents=%22auto%22},%224000%22)}),j.addEventListener(%22pointermove%22,function(a){pressure=a.pressure,x=a.pointerType});var%20z=document.createElement(%22button%22);z.textContent=%22Undo%22,z.style.position=%22fixed%22,z.style.top=%22105px%22,z.style.right=%2220px%22,z.style.zIndex=%229999%22,u.appendChild(z),z.addEventListener(%22click%22,function(){1%3Cr.length?(r.pop(),m.putImageData(r[r.length-1],0,0)):(m.clearRect(0,0,j.width,j.height),r.pop())});var%20A=!1,B=document.createElement(%22button%22);B.textContent=%22erase%22,B.style.position=%22fixed%22,B.style.top=%2270px%22,B.style.right=%2220px%22,B.style.zIndex=%229999%22,u.appendChild(B),B.addEventListener(%22click%22,function(){A?(B.textContent=%22erase%22,m.globalCompositeOperation=%22source-over%22,A=!1):(A=!0,B.textContent=%22erasing%20(active)%22,m.globalCompositeOperation=%22destination-out%22)});var%20C=!0,D=document.createElement(%22button%22);D.textContent=%22\uD83D\uDD8D%22,D.style.position=%22fixed%22,D.style.top=%22140px%22,D.style.right=%2220px%22,D.style.zIndex=%229999%22,u.appendChild(D),D.addEventListener(%22click%22,function(){C?(D.textContent=%22\uD83D\uDD8C%22,C=!1):(C=!0,D.textContent=%22\uD83D\uDD8D%22)});var%20E=!0,F=document.createElement(%22button%22);F.textContent=%22use%20hands%22,F.style.position=%22fixed%22,F.style.top=%22140px%22,F.style.right=%2220px%22,F.style.zIndex=%229999%22,u.appendChild(F),F.addEventListener(%22click%22,function(){E?(F.textContent=%22reject%20palm%22,E=!1):(E=!0,F.textContent=%22use%20hands%22)});[%22black%22,%22#02498c%22,%22#FFAB01%22,%22#5bc936%22,%22#ef3228%22,%22white%22].forEach(function(a,b){var%20c=document.createElement(%22button%22);c.style.backgroundColor=a,c.style.width=%2220px%22,c.style.height=%2220px%22,c.style.borderRadius=%225%%22,c.style.position=%22fixed%22,c.style.top=%2210px%22,c.style.right=20+22*b+%22px%22,c.style.zIndex=%229999%22,u.appendChild(c),c.addEventListener(%22click%22,function(){m.strokeStyle=a,w=1,m.globalCompositeOperation=%22source-over%22})});[%22rgba(245,%20232,%2039,%200.1)%22].forEach(function(a,b){var%20c=document.createElement(%22button%22);c.style.backgroundColor=a,c.style.width=%2220px%22,c.style.height=%2220px%22,c.style.borderRadius=%225%%22,c.style.position=%22fixed%22,c.style.top=%2230px%22,c.style.right=20+22*b+%22px%22,c.style.zIndex=%229999%22,u.appendChild(c),c.addEventListener(%22click%22,function(){m.strokeStyle=a,w=20,m.globalCompositeOperation=%22multiply%22})});var%20G=document.createElement(%22input%22);G.type=%22color%22,G.value=%22#02498c%22,G.style.zIndex=%229999%22,G.style.position=%22fixed%22,G.style.top=%2210px%22,G.style.right=%22150px%22,u.appendChild(G),G.addEventListener(%22change%22,function(){m.strokeStyle=G.value});var%20H=!1,I=document.createElement(%22button%22);I.textContent=%22disable%22,I.style.position=%22fixed%22,I.style.top=%22250px%22,I.style.right=%2220px%22,I.style.zIndex=%229999%22,u.appendChild(I),I.addEventListener(%22click%22,function(){H?(I.textContent=%22disable%22,j.style.pointerEvents=%22auto%22,H=!1):(H=!0,I.textContent=%22activate%20(disabled)%22,j.style.pointerEvents=%22none%22)});var%20J=document.createElement(%22button%22);J.textContent=%22clear%22,J.style.position=%22fixed%22,J.style.top=%22220px%22,J.style.right=%2220px%22,J.style.zIndex=%229999%22,u.appendChild(J),J.addEventListener(%22click%22,function(){m.clearRect(0,0,j.width,j.height),v=[],r=[]});var%20K=document.createElement(%22input%22);K.type=%22range%22,K.min=%221%22,K.max=%2210%22,K.value=n,K.style.position=%22fixed%22,K.style.top=%2250px%22,K.style.right=%2220px%22,K.style.zIndex=%229999%22,K.style.width=%22100px%22,u.appendChild(K),K.addEventListener(%22input%22,function(){n=K.value,m.lineWidth=n,console.log(m.lineWidth)})})();
