javascript:void eval("!function(){const e=['// @copyright       2022+, BLBC (github.com/hjk789, greasyfork.org/users/679182-hjk789)\\n// @license         https://github.com/hjk789/Userscripts/tree/master/YouTube-Clickbait-Buster#license\\nconst%20numberChunkColumns=1,fullTitles=!0,sortByTopComments=!0,preferredTranscriptLanguage=\%22\%22;let%20selectedVideoURL,continuationToken;const%20isMobile=!/www/.test(location.hostname);let%20hasSpace,isMenuReady=!1;extendFunctions();{const%20e=document.createElement(\%22style\%22);e.innerHTML=\%22.menu-item-button:hover%20{%20background-color:%20#aaa5%20!important;%20}transcript%20text%20{%20display:%20block;%20margin-top:%2010px;%20}.naturalWidth%20%3E%20div%20%3E%20div%20{%20opacity:%200.8%20!important;%20}.hasSpace%20%3E%20div%20{%20margin:%201px%20!important;%20}\%22,e.innerHTML+=\%22#video-title,%20h3,%20h4%20{%20max-height:%20initial%20!important;%20-webkit-line-clamp:%20initial%20!important;%20}\%22,document.head.appendChild(e)}document.body.addEventListener(\%22click\%22,(function(){const%20e=[\%22storyboard\%22,\%22highresThumbnail\%22,\%22transcriptContainer\%22,\%22channelViewportContainer\%22,\%22commentsContainer\%22];for(let%20t=0;t%3Ce.length;t++){const%20n=document.getElementById(e[t]);n&&n.remove()}hasSpace=void%200}));{const%20e=isMobile?\%22button\%22:\%22div\%22;var%20backgroundColor=\%22var(--yt-spec-brand-background-solid,%20\%22+getComputedStyle(document.documentElement).backgroundColor+\%22)\%22,viewStoryboardButton=createElement(e,{id:\%22viewStoryboardButton\%22,className:\%22menu-item-button\%22,style:isMobile?\%22\%22:\%22background-color:%20var(--yt-spec-brand-background-solid);%20font-size:%2014px;%20padding:%209px%2015px%209px%2056px;%20cursor:%20pointer;%20min-width:%20max-content;\%22,innerHTML:\%22Peek%20video%20content\%22,onclick:function(){const%20e=new%20XMLHttpRequest;e.open(\%22GET\%22,selectedVideoURL),e.onload=function(){const%20t=e.responseText.match(/\%22playerStoryboardSpecRenderer\%22:.+?\%22(https.+?)\%22,/);if(!t||t[1].includes(\%22googleadservices\%22))return%20void%20alert(\%22Storyboard%20not%20available%20for%20this%20video!\%22);const%20n=t[1].split(\%22|\%22);let%20o=n[3]?3:1;if(!n[o])return%20void%20alert(\%22Storyboard%20not%20available%20for%20this%20video%20yet!%20Try%20again%20some%20hours%20later.\%22);const%20i=n[o].replace(/.+#rs/,\%22&sigh=rs\%22),r=document.createElement(\%22div\%22);r.id=\%22storyboard\%22,r.style=\%22position:%20fixed;%20z-index:%209999;%20display:%20grid;%20width:%20min-content;%20max-width:%20100.3vw;%20overflow-y:%20inherit;%20background-color:%20white;%20margin:%20auto;%20top:%200px;%20left:%200px;%20right:%200px;\%22,r.style.maxHeight=isMobile?\%2291.4vh\%22:\%22100vh\%22,r.contentEditable=!isMobile,r.onmousedown=function(){window.getSelection().removeAllRanges()},document.body.appendChild(r),3==o&&o--;const%20a=+e.responseText.match(/\%22lengthSeconds\%22:\%22(\\\\d+)\%22,\%22ownerProfileUrl/)[1];createStoryboardImg(0,r,n,i,o,a,a%3C=120?1:a%3C=300?2:a%3C900?5:10)},e.send(),document.body.click()}}),viewTranscriptButton=createElement(e,{className:viewStoryboardButton.className,style:viewStoryboardButton.style.cssText,innerHTML:\%22Peek%20audio%20transcription\%22,onclick:function(){const%20e=new%20XMLHttpRequest;e.open(\%22GET\%22,selectedVideoURL),e.onload=function(){let%20t=e.responseText.match(/\%22playerCaptionsTracklistRenderer\%22:({\%22captionTracks\%22:\\\\[{\%22baseUrl\%22.+?}\\\\].+?}.+?\\\\].+?})},\%22videoDetails\%22/);if(!t)return%20void%20alert(\%22Transcript%20not%20available%20for%20this%20video!\%22);t=JSON.parse(unescape(decodeURI(t[1])).replaceAll(\%22\\\\\\\\u0026\%22,\%22&\%22));const%20n=document.createElement(\%22div\%22);n.id=\%22transcriptContainer\%22,n.style=\%22position:%20fixed;%20z-index:%209999;%20background-color:%20\%22+backgroundColor+\%22;%20color:%20var(--paper-listbox-color);%20font-size:%2015px;width:%20max-content;%20max-width:%2092vw;%20overflow:%20auto%20scroll;%20top:%200;%20left:%200;%20right:%200;%20margin:%20auto;%20padding:%2010px;\%22,n.style.maxHeight=isMobile?\%2290vh\%22:\%2298vh\%22,n.onclick=function(){event.stopPropagation()};const%20o=document.createElement(\%22div\%22);o.innerText=\%22Transcript%20language:%20\%22,o.style=\%22margin-bottom:%205px;%20width:%20max-content;\%22,n.appendChild(o);const%20i=document.createElement(\%22select\%22);i.style=\%22background-color:%20\%22+backgroundColor+\%22;%20color:%20var(--paper-listbox-color);%20border:%201px%20solid%20lightgray;%20border-radius:%205px;%20padding:%203px;\%22,i.onchange=function(){loadTranscript(t.captionTracks[this.selectedIndex].baseUrl)},o.appendChild(i);for(let%20e=0;e%3Ct.captionTracks.length;e++){const%20n=document.createElement(\%22option\%22);n.innerText=isMobile?t.captionTracks[e].name.runs[0].text:t.captionTracks[e].name.simpleText,n.value=t.captionTracks[e].languageCode,i.appendChild(n)}if(i.value=\%22\%22,!i.value)if(t.captionTracks.length%3E1){const%20e=t.audioTracks[0].captionTrackIndices[t.audioTracks[0].captionTrackIndices.length-1],n=t.captionTracks[e];if(\%22a\%22==n.vssId[0]){const%20o=n.vssId.split(\%22.\%22)[1];t.captionTracks[e+1]&&t.captionTracks[e+1].vssId.includes(o)?i.value=t.captionTracks[e+1].languageCode:t.captionTracks[e-1]?i.value=t.captionTracks[e-1].languageCode:i.value=t.captionTracks[t.audioTracks[0].captionTrackIndices[0]].languageCode}}else%20i.value=i.options[0].value;const%20r=document.createElement(\%22div\%22);r.innerText=\%22Translate%20to:%20\%22,r.style=\%22margin-top:%2010px;%20padding-bottom:%2010px;\%22,n.appendChild(r);const%20a=document.createElement(\%22select\%22);a.style=\%22margin-left:%2053px;%20background-color:%20\%22+backgroundColor+\%22;%20color:%20var(--paper-listbox-color);%20border:%201px%20solid%20lightgray;%20border-radius:%205px;%20padding:%203px;\%22,a.onchange=function(){loadTranscript(t.captionTracks[i.selectedIndex].baseUrl+\%22&tlang=\%22+this.value)},r.appendChild(a);const%20l=document.createElement(\%22option\%22);a.appendChild(l);for(let%20e=0;e%3Ct.translationLanguages.length;e++){const%20n=document.createElement(\%22option\%22);n.innerText=isMobile?t.translationLanguages[e].languageName.runs[0].text:t.translationLanguages[e].languageName.simpleText,n.value=t.translationLanguages[e].languageCode,a.appendChild(n)}a.value=\%22\%22,a.value||(a.value=\%22\%22.split(\%22-\%22)[0]),i.value.startsWith(a.value)&&(a.value=\%22\%22);const%20c=document.createElement(\%22div\%22);if(c.id=\%22transcriptTextContainer\%22,c.style=\%22min-width:%20max-content;%20max-width:%2092vw;%20border-top:%201px%20solid%20lightgray;\%22,n.appendChild(c),isMobile){n.createElment(\%22div\%22,{innerText:\%22X\%22,style:\%22position:%20sticky;%20width:%2025px;%20float:%20right;%20bottom:%200px;%20background-color:%20#f0f0f0ab;%20border-radius:%207px;%20padding:%2010px%2015px;%20text-align:%20center;%20font-size:%2025px;\%22,onclick:function(){document.body.click()}})}document.body.appendChild(n),loadTranscript(t.captionTracks[i.selectedIndex].baseUrl+\%22&tlang=\%22+(i.value.startsWith(a.value)?\%22\%22:a.value))},e.send(),document.body.click()}}),viewDescriptionButton=createElement(e,{className:viewStoryboardButton.className,style:viewStoryboardButton.style.cssText,innerHTML:\%22Peek%20description\%22,onclick:function(){const%20e=new%20XMLHttpRequest;e.open(\%22GET\%22,selectedVideoURL),e.onload=function(){const%20t=e.responseText.match(/\%22shortDescription\%22:\%22(.+?)[^\\\\\\\\]\%22/)[1].replaceAll(\%22\\\\\\\\n\%22,\%22\\\\n\%22).replaceAll(\%22\\\\\\\\r\%22,\%22\\\\r\%22).replaceAll(\%22\\\\\\\\\%22,\%22\%22);t.length%3C2?alert(\%22This%20video%20doesn\\'t%20have%20a%20description.\%22):alert(t)},e.send(),document.body.click()}}),viewCommentsButton=createElement(e,{className:viewStoryboardButton.className,style:viewStoryboardButton.style.cssText,innerHTML:\%22Peek%20comments\%22,onclick:function(){const%20e=new%20XMLHttpRequest;e.open(\%22GET\%22,selectedVideoURL),e.onload=function(){const%20t=e.responseText.match(/\%22INNERTUBE_API_KEY\%22:\%22(.+?)\%22/)[1];let%20n=e.responseText.match(isMobile?/\\\\\\\\x22continuationCommand\\\\\\\\x22:\\\\\\\\x7b\\\\\\\\x22token\\\\\\\\x22:\\\\\\\\x22(\\\\w+)\\\\\\\\x22/:/\%22continuationCommand\%22:{\%22token\%22:\%22(.+?)\%22/)[1];n=n.replace(\%22ABeA\%22,\%22AAeA\%22);const%20o=selectedVideoURL.includes(\%22/shorts/\%22)?\%22browse\%22:\%22next\%22,i=document.createElement(\%22div\%22);i.id=\%22commentsContainer\%22,i.style=\%22position:%20fixed;%20top:%200;%20left:%200;%20right:%200;%20z-index:%209999;%20margin:%20auto;%20width:%20700px;%20max-width:%2092vw;%20overflow-y:%20scroll;%20padding:%2010px;border:%201px%20solid%20lightgray;%20background-color:%20\%22+backgroundColor+\%22;%20color:%20var(--paper-listbox-color);%20font-size:%2015px;%20visibility:%20hidden;\%22,i.style.maxHeight=isMobile?\%2292vh\%22:\%2297vh\%22,i.onclick=function(){event.stopPropagation()};const%20r=i.createElment(\%22span\%22,{innerText:\%22Sort%20by:%20\%22}).createElment(\%22select\%22,{style:\%22background-color:%20\%22+backgroundColor+\%22;%20color:%20var(--paper-listbox-color);%20border:%201px%20solid%20lightgray;%20border-radius:%205px;%20padding:%203px;%20margin-bottom:%2010px;%20margin-left:%205px;\%22,onchange:function(){a.innerHTML=\%22\%22,n=n.replace(/A(A|B)eA/,\%22A\%22+this.value+\%22eA\%22),loadCommentsOrReplies(a,o,t,n)}});r.createElment(\%22option\%22,{innerText:\%22Top%20comments\%22,value:\%22A\%22}),r.createElment(\%22option\%22,{innerText:\%22Newest%20first\%22,value:\%22B\%22}),r.value=\%22A\%22;const%20a=i.createElment(\%22div\%22,{style:\%22border-top:%201px%20solid%20lightgray;%20padding-top:%2010px;\%22});if(document.body.appendChild(i),isMobile){i.createElment(\%22div\%22,{style:\%22position:%20relative;%20right:%2055px;\%22},!0).createElment(\%22div\%22,{style:\%22position:%20absolute;%20right:%200px;\%22}).createElment(\%22div\%22,{innerText:\%22X\%22,style:\%22position:%20fixed;%20width:%2025px;%20z-index:%2099999;%20background-color:%20#ddd8;%20border-radius:%207px;%20padding:%2010px%2015px;%20text-align:%20center;%20font-size:%2025px;\%22,onclick:function(){document.body.click()}})}loadCommentsOrReplies(a,o,t,n)},e.send(),document.body.click()}}),viewChannelButton=createElement(e,{className:viewStoryboardButton.className,style:viewStoryboardButton.style.cssText,innerHTML:\%22Peek%20channel\%22,onclick:function(){const%20e=new%20XMLHttpRequest;e.open(\%22GET\%22,selectedVideoURL),e.onload=function(){const%20t=e.responseText.match(/\%22channelId\%22:\%22(.+?)\%22/),n=document.body.createElment(\%22div\%22,{id:\%22channelViewportContainer\%22,style:\%22position:%20fixed;%20width:%20720px;%20max-width:%20100vw;%20height:%20\%22+(isMobile?\%2291vh\%22:\%22100vh\%22)+\%22;%20top:%200;%20left:%200px;%20right:%200px;%20z-index:%209999;%20margin:%20auto;%20background-color:%20\%22+backgroundColor+\%22;\%22});n.createElment(\%22iframe\%22,{style:\%22width:%20calc(100%%20-%204px);%20height:%20100%;\%22,src:\%22https://www.youtube.com/channel/\%22+t[1]});if(isMobile){n.createElment(\%22div\%22,{innerText:\%22X\%22,style:\%22position:%20absolute;%20width:%2025px;%20top:%200px;%20z-index:%2099999;%20background-color:%20#ddd;%20border-radius:%207px;%20padding:%2010px%2015px;%20text-align:%20center;%20font-size:%2025px;\%22,onclick:function(){document.body.click()}},!0)}},e.send(),document.body.click()}}),viewThumbnailButton=createElement(e,{id:\%22viewThumbnailButton\%22,className:viewStoryboardButton.className,style:viewStoryboardButton.style.cssText,innerHTML:\%22View%20high-res%20thumbnail\%22,onclick:function(){event.stopPropagation(),isMobile?this.parentElement.click():document.body.click();const%20e=cleanVideoUrl(selectedVideoURL).split(/=|shorts\\\\//)[1],t=document.createElement(\%22img\%22);t.id=\%22highresThumbnail\%22,t.src=\%22https://i.ytimg.com/vi_webp/\%22+e+\%22/maxresdefault.webp\%22,t.style=\%22position:%20fixed;%20z-index:%209999;%20max-height:%20100vh;%20max-width:%20100vw;%20margin:%20auto;%20top:%200px;%20left:%200px;%20right:%200px;\%22,t.onload=function(){120==this.clientWidth&&(this.onload=function(){120==this.clientWidth&&(this.onload=function(){120==this.clientWidth&&(this.onload=function(){120==this.clientWidth&&(alert(\%22Thumbnail%20not%20found!\%22),this.onload=void%200)},this.src=\%22https://i.ytimg.com/vi/\%22+e+\%22/hqdefault.jpg\%22)},this.src=\%22https://i.ytimg.com/vi_webp/\%22+e+\%22/hqdefault.webp\%22)},this.src=\%22https://i.ytimg.com/vi/\%22+e+\%22/maxresdefault.jpg\%22)},document.body.appendChild(t)}});viewStoryboardButton.style.borderTop=\%22solid%201px%20#aaa5\%22}function%20main(){const%20e=isMobile?\%22ytm-rich-item-renderer,%20ytm-video-with-context-renderer,%20ytm-compact-video-renderer,%20ytm-compact-playlist-renderer,%20ytm-compact-show-renderer,%20ytm-playlist-video-renderer\%22:\%22ytd-rich-item-renderer,%20ytd-grid-video-renderer,%20ytd-compact-video-renderer,%20ytd-compact-playlist-renderer,%20ytd-compact-movie-renderer,%20ytd-playlist-video-renderer,%20ytd-reel-item-renderer,%20ytd-video-renderer,%20ytd-compact-radio-renderer\%22;isMobile||addMenuItems(),document.body.addEventListener(\%22mousedown\%22,(function(){const%20t=document.querySelectorAll(e);for(let%20e=0;e%3Ct.length;e++)processVideoItem(t[e])})),window.onresize=function(){checkScreenSpaceAndAdaptStoryboard()},screen.orientation.onchange=function(){checkScreenSpaceAndAdaptStoryboard()}}function%20addMenuItems(){const%20e=setInterval((function(){const%20t=isMobile?document.getElementsByClassName(\%22yt-spec-bottom-sheet-layout\%22)[0]:document.querySelector(\%22#details%20#menu%20yt-icon,%20.details%20#menu%20yt-icon,%20#title-wrapper%20#menu%20.ytd-menu-renderer%20%3E%20#button%20yt-icon,%20ytd-playlist-video-renderer%20#menu%20yt-icon\%22);if(t){if(clearInterval(e),t.parentElement.previousSibling.addEventListener(\%22click\%22,(function(){document.getElementById(\%22viewStoryboardButton\%22).parentElement.remove()})),isMobile)t.style=\%22bottom:%20204px;%20border-radius:%2015px%2015px%200px%200px;\%22;else%20if(document.getElementById(\%22viewStoryboardButton\%22)||document.getElementById(\%22viewThumbnailButton\%22)){let%20e=\%22230px\%22;document.getElementById(\%22hideChannelButton\%22)&&(e=\%22260px\%22);const%20t=document.getElementById(\%22viewStoryboardButton\%22).parentElement.parentElement;t.style=\%22max-height:%20max-content%20!important;%20max-width:%20max(100%,%20\%22+e+\%22)%20!important;%20height:%20max-content%20!important;%20width:%20max(100%,%20\%22+e+\%22)%20!important;\%22;const%20n=t.firstElementChild.getBoundingClientRect().bottom,o=t.parentElement.parentElement.style;return%20void(n%3Escreen.height&&(o.top=parseInt(o.top)-(n-screen.height+10)+\%22px\%22))}if(isMobile){const%20e=document.createElement(\%22div\%22);e.style=\%22position:%20fixed;%20inset:%20auto%200%200%200;%20z-index:%209999;%20background:%20\%22+backgroundColor+\%22;%20border-radius:%200px%200px%2015px%2015px;%20margin:%208px;\%22,e.appendChild(viewStoryboardButton),e.appendChild(viewTranscriptButton),e.appendChild(viewDescriptionButton),e.appendChild(viewCommentsButton),e.appendChild(viewChannelButton),e.appendChild(viewThumbnailButton),document.body.appendChild(e)}else{document.querySelector(\%22ytd-menu-popup-renderer\%22)||(t.click(),t.click());const%20e=document.querySelector(\%22ytd-menu-popup-renderer\%22).querySelector(\%22tp-yt-paper-listbox#items\%22).parentElement;e.style=\%22max-height:%20max-content%20!important;%20max-width:%20max-content%20!important;%20height:%20max-content%20!important;%20width:%20max-content%20!important;\%22;const%20n=setInterval((function(){const%20o=e.querySelector(\%22ytd-menu-service-item-renderer,%20ytd-menu-navigation-item-renderer\%22);if(!o)return;clearInterval(n),o.parentElement.appendChild(viewStoryboardButton),o.parentElement.appendChild(viewTranscriptButton),o.parentElement.appendChild(viewDescriptionButton),o.parentElement.appendChild(viewCommentsButton),o.parentElement.appendChild(viewChannelButton),o.parentElement.appendChild(viewThumbnailButton),isMenuReady||(t.click(),t.click(),isMenuReady=!0);const%20i=o.parentElement.getBoundingClientRect().bottom,r=e.parentElement.parentElement.style;i%3Escreen.height&&(r.top=parseInt(r.top)-(i-screen.height+10)+\%22px\%22);(location.pathname.includes(\%22/channel/\%22)||location.pathname.includes(\%22/user/\%22)||location.pathname.includes(\%22/c/\%22)||\%22/playlist\%22==location.pathname)&&document.querySelector(\%22ytd-topbar-menu-button-renderer%20#avatar-btn\%22)?viewStoryboardButton.style.borderTop=\%22\%22:viewStoryboardButton.style.borderTop=\%22solid%201px%20#aaa5\%22}),100)}}}),100)}function%20processVideoItem(e){const%20t=e.querySelector(isMobile?\%22h3,%20h4\%22:\%22#video-title,%20#movie-title\%22);if(!t)return;let%20n=t.href||t.parentElement.href||t.parentElement.parentElement.href;const%20o=e.querySelector(isMobile?\%22.media-item-menu\%22:\%22ytd-menu-renderer\%22);o&&(o.parentElement.onclick=function(){selectedVideoURL=n,addMenuItems()})}function%20createStoryboardImg(e,t,n,o,i,r,a,l=0){const%20c=document.createElement(\%22div\%22);c.style=\%22position:%20relative;%20display:%20inline-block;%20width:%20min-content;\%22,c.contentEditable=!1;const%20d=document.createElement(\%22div\%22);d.style=\%22position:%20absolute;%20display:%20grid;%20width:%20100%;%20align-items:%20self-end;justify-items:%20end;%20pointer-events:%20none;%20opacity:%200.4;%20z-index:%201;\%22,c.appendChild(d);const%20s=n[0].replace(\%22L$L/$N\%22,\%22L\%22+i+\%22/M\%22+e++),p=document.createElement(\%22img\%22);p.src=s+o,p.style.verticalAlign=\%22top\%22,p.style.maxWidth=isMobile?\%22100vw\%22:\%2297.6vw\%22,p.onload=function(){const%20c=t.firstChild.lastChild,s=c.naturalWidth/5,p=c.naturalHeight/5;d.style.height=this.height%3Cc.height?this.height+\%22px\%22:\%22100%\%22;const%20m=Math.round(this.naturalWidth/s);let%20u=Math.round(this.naturalHeight/p);r%3C20&&(u=r%3C5?1:r%3C10?2:r%3C15?3:4);for(let%20e=0;e%3Cu;e++)for(let%20n=0;n%3Cm;n++){let%20o=0;(e||n||t.children.length%3E1)&&(o=l+=a),o%3Er&&(o=r);const%20i=new%20Date(null);i.setSeconds(o);const%20c=o%3E=3600?i.toISOString().substr(11,8):i.toISOString().substr(14,5),s=document.createElement(\%22a\%22);if(s.href=selectedVideoURL+\%22&t=\%22+o,s.style=\%22padding:%200px%202px;%20border-radius:%202px;%20background-color:%20#222;%20color:%20white;font-weight:%20500;%20font-size:%2011px;%20text-decoration:%20none;%20pointer-events:%20auto;%20z-index:%202;\%22,s.innerText=c,d.style.cssText+=\%22grid-template-columns:%20repeat(\%22+m+\%22,%201fr);%20grid-template-rows:%20repeat(\%22+u+\%22,%201fr);\%22,d.appendChild(s),o==r)break}2==t.children.length&&null==hasSpace&&checkScreenSpaceAndAdaptStoryboard(),t.focus(),createStoryboardImg(e,t,n,o,i,r,a,l)},p.onerror=function(){t.style.overflowY=t.scrollHeight%3Cscreen.height?\%22hidden\%22:\%22scroll\%22,t.contentEditable=!1,1==t.children.length&&(alert(\%22Storyboard%20not%20available%20for%20this%20video!\%22),t.remove()),this.parentElement.remove(),checkScreenSpaceAndAdaptStoryboard()},c.appendChild(p),t.appendChild(c)}function%20checkScreenSpaceAndAdaptStoryboard(e=numberChunkColumns){const%20t=document.getElementById(\%22storyboard\%22);if(!t)return;const%20n=t.firstChild.lastChild;if(numberChunkColumns%3E1&&e%3E0&&t.children.length%3E1&&n.naturalWidth==n.width){const%20o=(isMobile?2:21)+n.naturalWidth*e;hasSpace=screen.width%3Eo,hasSpace?(t.style.gridTemplateColumns=\%22repeat(\%22+e+\%22,%201fr)\%22,e%3E1&&t.classList.add(\%22hasSpace\%22)):(t.classList.remove(\%22hasSpace\%22),checkScreenSpaceAndAdaptStoryboard(e-1))}if(\%22inherit\%22!=t.style.overflowY){const%20e=t.lastChild,o=e.lastChild;e.firstChild.style.height=o.height%3C=n.height?o.height-1+\%22px\%22:\%22100%\%22,t.style.overflowY=t.scrollHeight%3Cscreen.height?\%22hidden\%22:\%22scroll\%22}n.naturalWidth-n.width%3C50?t.classList.add(\%22naturalWidth\%22):t.classList.remove(\%22naturalWidth\%22)}function%20loadTranscript(e){const%20t=new%20XMLHttpRequest;t.open(\%22GET\%22,e),t.onload=function(){const%20e=document.getElementById(\%22transcriptTextContainer\%22);e.innerHTML=t.responseText.replaceAll(\%22&amp;#39;\%22,\%22\\'\%22).replaceAll(\%22&amp;quot;\%22,\\'\%22\\').replaceAll(\%22&amp;\%22,\%22&\%22),e.firstElementChild.style=\%22width:%20max-content;%20max-width:%2096vw;%20display:%20block;%20left:%200;%20right:%200;%20position:%20relative;%20margin:%20auto;\%22;const%20n=e.firstElementChild.children;for(let%20e=0;e%3Cn.length;e++){const%20t=n[e].attributes.start.value.split(\%22.\%22)[0],o=new%20Date(null);o.setSeconds(t);const%20i=t%3E=3600?o.toISOString().substr(11,8):o.toISOString().substr(14,5),r=document.createElement(\%22a\%22);r.href=selectedVideoURL+\%22&t=\%22+t,r.style=\%22background-color:%20#aaa5;%20color:%20var(--paper-listbox-color);%20padding:%202px%205px%201px%205px;%20margin-right:%2010px;%20text-decoration:%20none;\%22,r.innerText=i,n[e].insertBefore(r,n[e].firstChild)}},t.send()}function%20loadCommentsOrReplies(e,t,n,o,i=!1){const%20r=new%20XMLHttpRequest;r.open(\%22POST\%22,\%22https://www.youtube.com/youtubei/v1/\%22+t+\%22?prettyPrint=false&key=\%22+n),r.onload=function(){let%20o=r.responseText;if(i){const%20e=[...r.responseText.matchAll(/{\%22authorText\%22:{\%22simpleText\%22:\%22(.+?)\%22/g)],t=[...new%20Set(e.map((e=%3Ee[1])))];for(let%20e=0;e%3Ct.length;e++)o=o.replaceAll(\%22@\%22+t[e],\%22%3Cspan%20style=\\'color:%20#999;%20user-select:%20none;\\'%3E@\%22+t[e]+\%22%3C/span%3E\%22)}let%20a=JSON.parse(o).onResponseReceivedEndpoints[i?0:1];if(!a)return%20alert(\%22Comments%20are%20turned%20off%20in%20this%20video.\%22);if(a=a[i?\%22appendContinuationItemsAction\%22:\%22reloadContinuationItemsCommand\%22].continuationItems,a){i||(document.getElementById(\%22commentsContainer\%22).style.visibility=\%22visible\%22);for(let%20o=0;o%3Ca.length;o++){const%20l=a[o].commentThreadRenderer;if(!l){if(!i){continuationToken=a[o].continuationItemRenderer.continuationEndpoint.continuationCommand.token;break}if(a[o].continuationItemRenderer){continuationToken=a[o].continuationItemRenderer.button.buttonRenderer.command.continuationCommand.token,loadCommentsOrReplies(e,t,n,continuationToken,!0);break}}const%20c=i?a[o].commentRenderer:l.comment.commentRenderer,d=c.contentText.runs;let%20s=\%22\%22;for(let%20e=0;e%3Cd.length;e++)s+=d[e].text;const%20p=document.createElement(\%22div\%22);if(p.innerHTML=s,p.style=i?\%22border-top:%201px%20solid%20lightgray;%20margin-top:%2010px;%20padding-top:%2010px;%20margin-left:%2060px;\%22:\%22border-bottom:%201px%20solid%20lightgray;%20margin-bottom:%2010px;%20padding-bottom:%2010px;\%22,c.authorIsChannelOwner){p.createElment(\%22div\%22,{innerText:c.authorText.simpleText,style:\%22background-color:%20gray;%20color:%20white;%20font-weight:%20500;%20font-size:%2013px;%20user-select:%20none;%20width:%20max-content;%20padding:%202px%206px;%20border-radius:%2010px;%20margin-bottom:%205px;\%22},!0)}else%20if(i&&r.responseText.includes(\%22@\%22+c.authorText.simpleText)){p.createElment(\%22div\%22,{innerText:c.authorText.simpleText,style:\%22font-weight:%20500;%20font-size:%2013px;%20user-select:%20none;%20margin-bottom:%205px;\%22},!0)}if(c.replyCount){const%20e=l.replies.commentRepliesRenderer.contents[0].continuationItemRenderer.continuationEndpoint.continuationCommand.token,o=(p.createElment(\%22span\%22,{style:\%22display:%20block;%20margin-top:%2010px;%20color:%20#065fd4;%20font-weight:%20500;%20cursor:%20pointer;%20font-size:%2014px;%20user-select:%20none;\%22,innerText:\%22%E2%96%BE%20Show%20\%22+(c.replyCount%3E1?\%22replies\%22:\%22reply\%22),onclick:function(){this.innerText.includes(\%22Show\%22)?(this.innerText=\%22%E2%96%B4%20Hide%20replies\%22,loadCommentsOrReplies(o,t,n,e,!0)):(this.innerText=\%22%E2%96%BE%20Show%20\%22+(c.replyCount%3E1?\%22replies\%22:\%22reply\%22),o.innerHTML=\%22\%22)}}),p.createElment(\%22div\%22))}e.appendChild(p)}}else%20i||alert(\%22This%20video%20doesn\\'t%20have%20any%20comments%20yet.\%22)},r.send(\\'{%20\%22context\%22:%20{%20\%22client\%22:%20{%20\%22clientName\%22:%20\%22WEB\%22,%20\%22clientVersion\%22:%20\%222.2022021\%22%20}%20},%20\%22continuation\%22:%20\%22\\'+o+\\'\%22%20}\\')}function%20extendFunctions(){Node.prototype.createElment=function(e,t,n){return%20createElement(e,t,this,n)}}function%20createElement(e,t,n,o){const%20i=document.createElement(e);let%20r=[];t&&(r=Object.getOwnPropertyNames(t));for(let%20e=0;e%3Cr.length;e++)i[r[e]]=t[r[e]];return%20n&&(o?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}function%20cleanVideoUrl(e){const%20t=e.split(\%22?\%22);if(!t[1])return%20e;const%20n=t[1].split(\%22&\%22);for(let%20e=0;e%3Cn.length;e++)if(n[e].includes(\%22v=\%22))return%20t[0]+\%22?\%22+n[e]}main();'],t=[[[\%22https://www.youtube.com/*\%22,\%22https://m.youtube.com/*\%22],[]]],n=\%220.02463863347011719-1707437019624-userscripts-ran\%22,o=e.length;function%20i(e,t){const[n,o]=e;for(const%20e%20of%20o)if(r(e,t))return!1;for(const%20e%20of%20n)if(r(e,t))return!0;return%200===n.length}function%20r(e,t){let%20n;return%20n=e.startsWith(\%22/\%22)&&e.endsWith(\%22/\%22)?new%20RegExp(e.slice(1,-1)):function(e){let%20t=e;for(let%20e=0;e%3Ca.length;e++){const%20n=a[e],o=l[e];t=t.replace(o,\%22\\\\\%22+n)}return%20new%20RegExp(\%22^\%22+t.replace(/\\*/g,\%22.*\%22)+\%22$\%22,\%22i\%22)}(e),n.test(t)}const%20a=Array.from(\%22\\\\.+?^$()[]{}|\%22),l=a.map((e=%3Enew%20RegExp(\%22\\\\\%22+e,\%22g\%22)));!function(){if(!window[n]||confirm(\%22Are%20you%20sure%20you%20want%20to%20run%20the%20userscripts%20again?\%22)){window[n]=!0,window.isRunningAsBookmarkletUserscript=!0;for(let%20n=0;n%3Co;n++){const%20o=e[n];if(i(t[n],location.href))try{window.eval(o)}catch(e){console.error(e)}}delete%20window.isRunningAsBookmarkletUserscript}}()}();%22)
